---
title: "plotly"
author: "Gunnar"
date: "10/28/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

loading nyc restaurants data

```{r}
library(tidyverse)
library(janitor)
library(p8105.datasets)
library(plotly)
library(tidygeocoder)
```

cleaning the dataset
```{r, eval= FALSE}
data("rest_inspec")

nyc_rest <- rest_inspec  %>%
  rename(rest_id = camis, rest_name = dba) %>%
  mutate(boro = ifelse(boro == "Missing", NA, boro), boro = factor(boro, labels = c("MANHATTAN", "BRONX", "BROOKLYN", "QUEENS", "STATEN ISLAND")), grade = factor(grade, labels = c("A", "B", "C", "P", "Z", "Not Yet Graded"))) %>%
  select(boro, grade, score, rest_id, rest_name, cuisine_description, violation_description, violation_code, street, building, zipcode) %>%
  filter(
    boro == "MANHATTAN") %>%
  drop_na(grade) %>%
  slice_sample(n = 2500, replace = FALSE)
```

#combing building street and zipcode into address
```{r, eval = FALSE}
nyc_rest <- nyc_rest %>%
  mutate(address = str_c(building, " ", street, ", New York ", zipcode))
```



#adding lat and long variables to data set
```{r, eval= FALSE}
nyc_addresses <- nyc_rest %>%
  geocode(address)
```

#saving geocoded data to a csv so that I don't need to geocode data again
```{r, eval = FALSE}
write_csv(nyc_addresses, "nyc_addresses.csv")
```




##boxplot

```{r}
airbnb %>%
  mutate(neighbourhood = fct_reorder(neighbourhood, price)) %>%
  plot_ly(y = ~price, x = ~neighbourhood, color = ~neighbourhood,
          type = "box", colors = "viridis")
```


##bar plot
```{r}
airbnb %>%
  count(neighbourhood) %>%
  mutate(neighbourhood = fct_reorder(neighbourhood, n)) %>%
  plot_ly(x = ~neighbourhood, y = ~n, color = ~neighbourhood, 
          type = "bar", colors = "viridis")
```


##ggplotly
```{r}
airbnb_scatter <- airbnb %>%
  ggplot(aes(x = lat, y = long, color = price)) +
  geom_point()

ggplotly(airbnb_scatter)
```


#Dashboard time

